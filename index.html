<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>coco medaka 35</title>


<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/style_spinner.css">


    <!--Bootstrap----20220705-1943--->
      <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
    </script>

</head>
<body>



<br>
<br>
<h1 class="htu"></h1>
<h1 class="htu"></h1>

<hr style="border:0;border-top:1px solid;">
	
<form id="form1">
<p class="resizeimage">
　　<img id="sendImage" src="QR_icon.png" alt="QRコードをスキャン" style="display: block; margin-left: auto; margin-right: 0;">


</p>
	
</form>	

	
	
	
<h1 class="m1">© Coco Medaka35</h1>

<h1 class="htu"></h1>
	



</body>
	
<script>
    // LIFFの初期化
    liff.init({ liffId: '1657196041-vDWabr0g' }, () => {
        if (liff.isLoggedIn()) {
            // ユーザーがログインしている場合
            // 画像のクリックイベントを設定
            $('#sendImage').click(sendIdTokenToGAS);
        } else {
            // ログインが必要な場合、ログインページを表示
            liff.login();
        }
    });

    // IDトークンをGASに送信する関数
    function sendIdTokenToGAS() {
        const idToken = liff.getIDToken();

        // IDトークンをGASに送信
        $.ajax({
            url: 'https://script.google.com/macros/s/AKfycbw9thHA0RBqLuiQZEK3X6zsJtkuBBqpfmX38h9Ofu38jRDafRklfVq89yvTvtacjtGobA/exec',
            type: 'POST',
            data: { idToken: idToken },
            success: function (response) {
                // 成功時の処理
                console.log(response);
                displayMessage(response); // レスポンスメッセージを表示
                displayData(response);
            },
            error: function (error) {
                // エラー時の処理
                console.error(error);
                alert('Failed to send ID Token to GAS.');
            }
        });
    }

    // メッセージを表示する関数
    function displayMessage(message) {
        const messageElement = document.createElement('p');
        messageElement.textContent = message;
        document.body.appendChild(messageElement);
    }

    // 取得したデータをHTMLに表示する関数
    function displayData(data) {
        const jsonData = JSON.parse(data);

        const container = document.getElementById("data-container");
        const container2 = document.getElementById("data-container2");
        const container3 = document.getElementById("data-container3");

        const paragraph = document.createElement("p");
        paragraph.textContent = `${jsonData.name} 様`;
        container.appendChild(paragraph);

        const paragraph2 = document.createElement("p");
        paragraph2.textContent = `${jsonData.score} `; // pt
        container2.appendChild(paragraph2);

        const paragraph3 = document.createElement("p");
        paragraph3.textContent = `${jsonData.rank} `; //rank
        container3.appendChild(paragraph3);
    }



    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>

    <script src="index_modal.js"></script>

<script src="style_modal.js"></script>


 <script src="spinner.js"></script>
 <script src="index.js"></script>
 <script src="liff.js"></script>
	
	

	
	
	
	
</html>
